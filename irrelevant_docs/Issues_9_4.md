## Prompt for task 6 start
 please implement task 6 of taskmaster, including each of it's subtasks. This involves: Create Supabase Edge Function 'gradeSubmission' in TypeScript. Function triggered when submission status is 'pending' and              ││   referee_type is 'ai'. Implement pre-checks before API call: word count for documents using simple regex, parse URLs to check if accessible, OCR for    ││ images if needed. Construct Gemini API prompt with rubric from      ││   goal and submission content. Sanitize user rubric to prevent prompt injection. For MVP, focus on quantitative checks: document word count, GitHub commit verification, number recognition in images. Parse Gemini ││          ││   response to extract pass/fail verdict and confidence score. Update submission record with ai_analysis_result, status, and feedback. Implement retry logic for API failures. Add cost optimization by checking simple          ││   criteria first. Store API usage metrics for monitoring.... For testing: Test with various submission types and rubrics. Verify prompt injection prevention works. Test API error handling and retries. Ensure simple checks   ││   work without API call. Verify grading results are stored correctly. Test with edge cases like empty submissions or malformed ││ rubrics... Keep in mind our current Schema setup, detailed here: 'c:/Users/Daniel             ││   Lopez/Desktop/Neet-a-thon/Threativator/threativator-1/._docs/Schema_Summary_Current.md' and our overal project overview  as detailed here: 'c:/Users/Daniel                                                                   ││   Lopez/Desktop/Neet-a-thon/Threativator/threativator-1/._docs/project-overview.md'. Be thurough, run tests often, and let me know whenever you need me to do anythig with supabase related migrations, or other web related    ││   stuff. Our api key for gemini is in our .env folder as "GOOGLE_API_KEY" (without quotes).       


 please implement task 7 of taskmaster, including each of it's subtasks. This involves: Set up pg_cron extension in Supabase to run job every 5 minutes. Create database function that identifies overdue checkpoints where status is 'pending' and deadline has passed. Create Edge Function 'triggerConsequence' that processes identified failures. For checkpoint failures, implement Russian Roulette with 33% probability using crypto.randomInt(). For monetary consequences, integrate Stripe API to transfer funds from holding cell to charity. For humiliation consequences, randomly select contact from consequence_targets and send email via SendGrid with selected Kompromat. For final deadline failures, guarantee 100% consequence execution. Create consequence records for audit trail. Implement failure notifications with mysterious 'Great dishonor' message. Add in-app failure modal with dramatic animation. Handle edge cases like insufficient funds or missing Kompromat. ....  Keep in mind our current Schema setup, detailed here: 'c:/Users/Daniel Lopez/Desktop/Neet-a-thon/Threativator/threativator-1/._docs/Schema_Summary_Current.md' and our overal project overview  as detailed here: 'c:/Users/Daniel Lopez/Desktop/Neet-a-thon/Threativator/threativator-1/._docs/project-overview.md'. Be thurough, run tests often, and let me know whenever you need me to do anythig with supabase related migrations, or other web related 

## what remains of below:

no, it's still not appearing in the month view of the calander; additionally, in the week view, it seems to make its own new row   ││   instead of using the hour view.. Now i acutally don't think we need the hour by nour view of the week view, it's commpletly        ││   unnecesary. Instead lets just make each day have a longer vertically speaking column space, and make the little cards for each     ││   checkpoint or deadline like a larger squares than hey are currently in the cramped state. but the colums should be as large as     ││   how like the month view is long vertically


### **PHASE 2: CALENDAR SYSTEM RECONSTRUCTION (Critical - 3 hours)**

- [ ] **Remove hourly granularity** - Eliminate time slots, focus on date-based deadlines
- [ ] **Implement improved checkpoint or deadline display in view** - Should be able to see 1-4 deadline event cards per day (so more compact for the month view; and larger for week view ( each card should take up 1/4th of the column view))

#### **2.3 Deadline-Specific Event Styling**
- [ ] **Custom event components** - Create deadline-specific event cards
- [ ] **Soviet event styling** - Crimson chips with black borders, no time display
- [ ] **Event text optimization** - Goal name + deadline only, no time slots
- [ ] **Click behavior** - Events should trigger submission modal

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


### left side checlist (done but erroneosly)

Help me understand how we can go about fixing the following UI problems with our web app, regarding the dashboard and some pop up modals, as detailed here: First things first, when you have made a goal that has a deadline and checkpoint, it shows up on the calendar, but they seem to be creating their own row of blank entries under that week of dates. As you can see from the image attached, they are appearing on screen, but in a manner that's not what we're going for. We want them to be in the calendar box for their date, taking up a decent portion of that space. It would be nice in general if the monthly caldner view in gernal took more space (as you can see there is alot of open unused space in that area). 

Secondly, when you open the checkpoint or deadline, by clicking it, you can see that the modal gets stuck to the bottom of the page and There's no ability to click submit proof. like You can't see a button to submit anything. We want the pop-up model to actually be, when you click on it on a date, to be just like the pop-up models for the command actions where it takes up the center of the screen, In the middle, and it makes the background blurry, and all you can really see in the center of the screen is the pop-up model. It's quite, it's decently large where you can see all the information, and you can also click a button to submit proof. We cannot do that currently

Additionally, it seems like the checkpoints and deadlines, they're not appearing in the immediate directives sidebar. I did not see them in the sidebar. It should be there present.

As for the command actions, the exit button doesn't fiw. To fix this, let's remove Submit proof from the command actions, as we don't actually need a submit proof button in the command actions. You can remove that and thus allow the exit to fit in the box as the last item of the six boxes. Right now there's seven, and thus the exit button does not fit. That is no good.

When creating a new mission, the UI seems to not really fit. It's much too large, especially if you can see the text boxes for mission designation, mission briefing, final deadline. I mean, all those boxes are much too large, and the overall cards are much too large, taking up and going over the screen limit. 

Oh, yeah, for the kompromat, it would be nice to be able to view the kompromat after you have submited it. Right now, we can only delete it when you're looking at the managing existing tab. It'd be nice if you could delete it. Let's fix these issues. 